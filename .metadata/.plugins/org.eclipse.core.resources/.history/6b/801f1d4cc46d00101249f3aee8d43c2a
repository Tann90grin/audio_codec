#include "WM8731.h"

wm8731::wm8731(I2C_HandleTypeDef *hi2c)
{
	this->hi2c = hi2c;
}

uint8_t wm8731::wm8731_cmd(uint8_t addr, uint16_t data)
{
	CTRL_WORD cw;
	uint8_t temp = (data & 0x100) >> 7;
	cw.ctrl_word[0] = (addr << 1) | temp;
	cw.ctrl_Word[1] = data & 0xff;
	if(HAL_I2C_Master_Transmit(this->hi2c, I2C_ADDRESS, cw.ctrl_word, 2, HAL_MAX_DELAY) != HAL_OK)
	{
		return 1;
	}
	return 0;
}
